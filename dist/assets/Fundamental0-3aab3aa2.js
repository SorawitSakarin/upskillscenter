import{j as s,u as w,$ as z,r as p,M as R,A as J,Q,a as W}from"./index-55cceeff.js";import{u as Y}from"./http-hook-dc2aacf9.js";import{l as K,m as V,b as X}from"./Default-5-d87e80c7.js";import{S as Z}from"./SideBar-69560abc.js";import{C as _,b as ss}from"./index.esm-231efaf1.js";import{c as F,u as A}from"./Default-1-c8c4daa2.js";import{b as es}from"./Default-10-8aff1d4f.js";/* empty css                    */const ts=({completedCourse:t,numberOfCourse:a})=>{const l=a-t;return s.jsxs("div",{className:"fund-banner-prog",children:[Array.from({length:t}).map((x,i)=>s.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[i>0&&s.jsx("div",{className:"fund-banner-prog-space"}),s.jsx("div",{className:"fund-banner-prog-logo",children:s.jsx("img",{src:F,alt:"complete",width:24})})]},i)),Array.from({length:l}).map((x,i)=>s.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[(i>0||t!==0)&&s.jsx("div",{className:"fund-banner-prog-space-white"}),s.jsx("div",{className:"fund-banner-prog-logo",children:s.jsx("img",{src:A,alt:"uncomplete",width:24,style:{opacity:.4}})})]},i))]})},ns=({course:t})=>{const a=w(),l=Math.floor(parseInt(t.time)/60),x=()=>{a(`/learn/${t.id}`)};return s.jsxs("div",{className:"fund-list-card",onClick:x,children:[s.jsx("div",{className:"fund-list-card-top",children:s.jsx("img",{src:t.banner})}),s.jsxs("div",{className:"fund-list-card-bottom",children:[s.jsxs("div",{children:[s.jsx("h5",{children:"Fundamental"}),s.jsx("h3",{children:t.topic}),s.jsxs("p",{className:"p-h4",children:[l," minutes"]})]}),s.jsxs("div",{children:[t.status&&s.jsx("img",{src:F,alt:"checkLogo",width:24}),!t.status&&s.jsx("img",{src:A,alt:"uncheckLogo",width:24,style:{opacity:"0.4"}})]})]})]})},as=({groupedCourses:t,selectedTag:a,setTagCard:l,tagCard:x,selectedTopic:i})=>{w();const k=JSON.parse(localStorage.getItem("school")||"null"),r=t.find(e=>e[0].tag===a),h=r.length,g=r.filter(e=>e.status===!0).length,N=r.reduce((e,c)=>e+parseInt(c.time),0),v=Math.floor(N/60),j={backgroundImage:`linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.6)), url(${k.backgroundLogin})`},y=()=>{l(!0)};return s.jsxs("div",{className:"fund-list-item",children:[s.jsxs("div",{className:"fund-list-item-banner",style:j,children:[s.jsx("div",{className:"fund-list-item-banner-top",children:s.jsx("div",{className:"back-button-circle",onClick:()=>{y()},children:s.jsx("img",{src:es,alt:"back button",width:16})})}),s.jsxs("div",{className:"fund-list-item-banner-body",children:[s.jsx("img",{src:z,alt:"Logo",width:48}),s.jsx("h3",{children:"Fundamental"}),s.jsx("h1",{style:{marginTop:"16px"},children:r[0].tag}),s.jsx("div",{style:{margin:"8px"},children:s.jsx(ts,{completedCourse:g,numberOfCourse:h})}),s.jsxs("p",{className:"p-h3",children:[" ",v," minutes | ",g,"/",h," lessons complete"]})]})]}),s.jsx("div",{className:"fund-list",children:r&&r.map((e,c)=>s.jsx("div",{children:s.jsx(ns,{course:e})},c))})]})},is=({courses:t,tagCard:a,setTagCard:l,setSelectedTag:x,selectedTag:i,selectedTopic:k})=>{if(t.length===0)return s.jsx("div",{className:"fund-no-list",children:s.jsx("h1",{children:"Coming soon...."})});const r=w(),[h,g]=p.useState(!1),N=()=>{g(!1),console.log("close")},v=(e,c)=>{c?(x(e),l(!a)):g(!0)},j=t.reduce((e,c)=>{const f=c.tag,m=e.findIndex(C=>{var S;return((S=C[0])==null?void 0:S.tag)===f});return m===-1?e.push([c]):e[m].push(c),e},[]);console.log("groupedCourses",j);const y=e=>e.charAt(0).toUpperCase()+e.slice(1);return s.jsxs("div",{className:"fund-list",children:[!a&&i&&s.jsx(as,{groupedCourses:j,selectedTag:i,tagCard:a,setTagCard:l,selectedTopic:k}),a&&j.map((e,c)=>{const f=e.filter(b=>b.status===!0).length,m=e.length,C=e.reduce((b,I)=>b+parseInt(I.time),0),S=Math.floor(C/60);return s.jsxs("div",{className:"fund-card ",onClick:()=>v(e[0].tag,e[0].pretestStatus),children:[s.jsx("div",{children:s.jsx("img",{src:e[0].subjectBanner,alt:"topic banner",style:{borderTopLeftRadius:"16px",borderBottomLeftRadius:"16px"}})}),s.jsxs("div",{className:`fund-card-left ${e[0].pretestStatus?"active":""}`,children:[s.jsxs("div",{children:[s.jsx("p",{className:"p-h5",children:"Fundamental"}),s.jsx("h2",{children:y(e[0].tag)})]}),s.jsxs("p",{className:"p-h4",children:["Total ",S," minutes"]})]}),s.jsxs("div",{className:`fund-card-right ${e[0].pretestStatus?"active":""}`,children:[s.jsxs("div",{style:{width:"24px"},children:[f!==m&&s.jsx(_,{value:f/m*100,strokeWidth:14,styles:ss({pathColor:"#F37103",trailColor:"#dedede"})}),f===m&&s.jsx("img",{src:F,alt:"checkLogo",width:24})]}),s.jsxs("h2",{children:[f," / ",m]})]})]},c)}),s.jsx(R,{show:h,onHide:N,centered:!0,children:s.jsx(R.Body,{children:s.jsxs("div",{style:{padding:"24px",flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center",gap:"16px"},children:[s.jsx("h1",{children:"Notice"}),s.jsxs("p",{className:"p-h2",children:["You must first complete a pretest in this topic before taking the exam.",s.jsx("br",{}),"Go to do the pretest exam."]}),s.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"24px"},children:[s.jsx("button",{style:{padding:"10px",borderRadius:"8px",border:"1.4px solid black"},onClick:N,children:"Back"}),s.jsx("button",{style:{padding:"10px",backgroundColor:"#F37103",color:"white",borderRadius:"8px"},onClick:()=>r(`/pretest/${j[0][0].preTestId}`),children:"Let's Go to the test!"})]})]})})})]})},rs=({courses:t,subjects:a,setTagCard:l,tagCard:x,setSelectedTag:i,selectedTag:k,setSelectedTopic:r,selectedTopic:h})=>(console.log(t),s.jsx("div",{children:s.jsxs("div",{className:"fundamental-body ",children:[s.jsx(Z,{setSelectedTopic:r,headerTitle:"Fundamental",setTagCard:l,subjects:a}),s.jsxs("div",{className:"fundamental-body-right appear",children:[s.jsx("h1",{children:h}),s.jsx(is,{courses:t[h]?t[h]:[],setSelectedTag:i,selectedTopic:h,selectedTag:k,setTagCard:l,tagCard:x})]})]})})),xs=()=>{var D;const t=p.useContext(J),a=w(),{isLoading:l,error:x,sendRequest:i,clearError:k}=Y(),[r,h]=p.useState(),[g,N]=p.useState(),[v,j]=p.useState(),[y,e]=p.useState(),c=[{icon:K,name:"English",topics:[]},{icon:V,name:"Math",topics:[]},{icon:X,name:"Computer Science",topics:["Programing","Streaming"]}],f=Q(),m=new URLSearchParams(f.search),C=m.get("v"),S=m.get("tag"),b=(D=m.get("topic"))==null?void 0:D.toUpperCase(),[I,P]=p.useState(b||"TOEIC"),[H,O]=p.useState(S||""),[U,G]=p.useState(C!=="card");return p.useEffect(()=>{const T=async()=>{try{const n=await i("https://upskill-develop.herokuapp.com/api/pretest");if(n){const d=window.location.hostname.split(".")[0],o=n.data.filter(u=>u.subDomain==="all"||u.subDomain.split(",").includes(d));if(b){const u=o.find(L=>L.id.toString()===b.toString()).title;P(u)}h(o)}}catch(n){a("/home"),console.log(n)}};(async()=>{try{const n=await i("https://upskill-develop.herokuapp.com/api/course/courseType/fundamental");if(n){const d=window.location.hostname.split(".")[0],o=n.data.filter(u=>u.subDomain==="all"||u.subDomain.split(",").includes(d));N(o)}}catch(n){a("/home"),console.log(n)}})(),T()},[i]),p.useEffect(()=>{if(!r||!g)return;let T=r.reduce((n,d)=>{let o=n.find(u=>u.name===d.subject);return o?o.topics.push(d.title):n.push({name:d.subject,topics:[d.title]}),n},c),M=g.reduce((n,d)=>{var B,$;const o=r.find(q=>q.id===d.preTestId),u=o?o.title:void 0,L=o?(B=o.studentList)==null?void 0:B.split(",").includes(t.userId.toString()):!1,E=o?($=d.studentList)==null?void 0:$.split(",").includes(t.userId.toString()):!1;return n[u]?n[u].push({...d,status:E,pretestStatus:L,subjectBanner:o.banner}):n[u]=[{...d,status:E,pretestStatus:L,subjectBanner:o.banner}],n},{});e(M),j(T)},[r,g]),s.jsxs("div",{className:"exam-body ",children:[(l||!v||!y)&&s.jsx(W,{}),!l&&v&&y&&s.jsx(rs,{setSelectedTopic:P,setSelectedTag:O,selectedTopic:I,selectedTag:H,setTagCard:G,subjects:v,courses:y,tagCard:U})]})};export{xs as default};
