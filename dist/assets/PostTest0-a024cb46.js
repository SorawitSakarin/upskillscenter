import{u as f,P as y,r as i,j as s,M as j}from"./index-55cceeff.js";import{u as v}from"./http-hook-dc2aacf9.js";import{L as w}from"./LoadingSpinnerPencil-94ce2a7f.js";import{u as T}from"./useLeavePageWarning-fc16e788.js";import{A as b,B as k,T as I}from"./Default-06980837.js";import{Y as S}from"./YouTube.esm-ce1361be.js";/* empty css             */import{T as N}from"./TestDocumentImages-5e8244b6.js";import"./index.esm-9a14dc49.js";import"./iconBase-4260ecf4.js";import"./AnswerSheet-c8cd74e3.js";import"./Anchor-149a2421.js";const P=({exam:t})=>{var d,c;const p=f(),{testId:n}=y();T(!0);const[x,r]=i.useState(0),[m,l]=i.useState(!1),[h,o]=i.useState(!0),u=()=>{o(!1),p("/home")},g=()=>{o(!1),l(!0),r(new Date().getTime())},a={height:"500",width:"100%",playerVars:{autoplay:0}},e=t==null?void 0:t.videoUrl.split("v=")[1];return s.jsxs("div",{className:"test-body",children:[s.jsxs("div",{className:"test-body-row",children:[s.jsxs("div",{className:"test-card",children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("h1",{children:["PostTest ",t.title]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"end"},children:[s.jsxs("p",{className:"p-h4",children:["  ",Math.floor(t.time/60)," minutes"]}),s.jsxs("p",{className:"p-h4",children:[" ",(d=t.tag)==null?void 0:d.split(",").splice(0,3).join(",")," "]})]})]}),s.jsx("div",{className:"test-description",children:s.jsx("p",{className:"p-h2",dangerouslySetInnerHTML:{__html:t.description.replace(/\n/g,"<br />")}})}),e&&s.jsx(S,{videoId:e,opts:a}),s.jsx(N,{documentImages:t.questionFile})]}),s.jsx("div",{style:{minWidth:"242px"}}),s.jsx("div",{className:"sticky-wrapper",children:s.jsx(b,{totalQuestions:t.totalQuestions,running:m,startTime:x,type:"posttest",postTestId:n,preTestId:t.preTestId,randomAns:!0,mock:!1})})]}),s.jsx(j,{show:h,centered:!0,dialogClassName:"modal-body",children:s.jsx(j.Body,{children:s.jsxs("div",{style:{padding:"24px",flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center",gap:"12px"},children:[s.jsxs("h1",{children:["Welcome to ",t.title]}),s.jsx("p",{className:"p-h2",dangerouslySetInnerHTML:{__html:t.description.replace(/\n/g,"<br />")}}),s.jsx("p",{className:"p-h2",children:"การสอบ Post-Test สามารถสอบได้กี่ครั้งก็ได้ แต่คะแนนจะถูกบันทึกแค่ครั้งแรกครั้งเดียวเท่านั้น ต้องการจะเริ่มทำข้อสอบเลยหรือไม่"}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",width:"100%",gap:"8px",justifyContent:"flex-start"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"nowrap",width:"300px"},children:[s.jsx("img",{src:k,alt:"BookLogo",width:24}),s.jsx("h2",{children:(c=t.tag)==null?void 0:c.split(",").splice(0,3).join(",")})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("img",{src:I,alt:"BookLogo",width:24}),s.jsxs("h2",{children:["Time ",Math.floor(t.time/60)," minutes"]})]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"24px",marginTop:"16px"},children:[s.jsx("button",{style:{padding:"10px",borderRadius:"8px",border:"1.4px solid black"},onClick:u,children:s.jsx("h3",{children:"Go back"})}),s.jsx("button",{style:{padding:"10px",backgroundColor:"#F37103",borderRadius:"8px",color:"white"},onClick:g,children:s.jsx("h3",{children:"Start!"})})]})]})})})]})},D=()=>{const t=f(),{testId:p}=y(),{isLoading:n,error:x,sendRequest:r,clearError:m}=v(),[l,h]=i.useState(!1),[o,u]=i.useState();return i.useEffect(()=>{(async()=>{var a;try{const e=await r(`https://upskill-develop.herokuapp.com/api/posttest/${p}`),d=e==null?void 0:e.data.posttest,c=(a=e==null?void 0:e.data.question.correctAnswer)==null?void 0:a.split(",").length;u({...d,totalQuestions:c})}catch{t("/home")}})(),setTimeout(()=>{h(!0)},7e3)},[r]),s.jsxs("div",{children:[(n||!l)&&s.jsx("div",{style:{height:"100vh",width:"100vw",backgroundColor:"#dededeaa"},children:s.jsx(w,{url:"https://www.facebook.com/Upskillscenter"})}),!n&&o&&l&&s.jsx(P,{exam:o})]})};export{D as default};
