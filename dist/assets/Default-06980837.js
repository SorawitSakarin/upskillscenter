import{r as c,j as e,V as L,u as T,A as E,R as F,M as y}from"./index-55cceeff.js";import{P as U}from"./AnswerSheet-c8cd74e3.js";import{u as G}from"./http-hook-dc2aacf9.js";const J=({totalQuestions:t,totalPages:j,activePage:o,answers:n,setAnswers:a})=>{const l=(o-1)*10+1,x=o*10>t?t:o*10,g=c.useCallback((s,r)=>{const d=[];for(let b=s;b<r+1;b++)d.push({id:b});return d},[])(l,x),i=(s,r)=>{a(d=>({...d,[s]:r})),console.log(r,s)};return e.jsx("div",{style:{minHeight:"305px"},children:g.map((s,r)=>e.jsxs("div",{className:"ans-row",children:[e.jsx("div",{className:"ans-row-left",children:e.jsxs("p",{className:"p-h2",children:[s.id,"."]})}),e.jsxs("div",{className:"ans-row-right",children:[e.jsx("button",{className:`ans-btn ${n[s.id]==="A"?"ans-btn-select":""}`,onClick:()=>i(s.id,"A"),children:e.jsx("p",{className:"p-h3",children:"A"})}),e.jsx("button",{className:`ans-btn ${n[s.id]==="B"?"ans-btn-select":""}`,onClick:()=>i(s.id,"B"),children:e.jsx("p",{className:"p-h3",children:"B"})}),e.jsx("button",{className:`ans-btn ${n[s.id]==="C"?"ans-btn-select":""}`,onClick:()=>i(s.id,"C"),children:e.jsx("p",{className:"p-h3",children:"C"})}),e.jsx("button",{className:`ans-btn ${n[s.id]==="D"?"ans-btn-select":""}`,onClick:()=>i(s.id,"D"),children:e.jsx("p",{className:"p-h3",children:"D"})})]})]},r))})},V=({running:t})=>{const[j,o]=c.useState(0);c.useEffect(()=>{if(t){const a=setInterval(()=>{o(l=>l+1)},1e3);return()=>clearInterval(a)}},[t]);const n=a=>{const l=Math.floor(a/60),x=a%60;return`  ${String(l).padStart(2,"0")}     ${String(x).padStart(2,"0")}`};return e.jsx("div",{className:"timer",children:e.jsxs("div",{children:[e.jsx("h1",{children:n(j)}),e.jsx("p",{className:"p-h3",style:{opacity:"0.5"},children:" minutes  seconds"})]})})},W=({color:t})=>e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},className:"appear-load",children:e.jsx(L,{visible:!0,height:"80",width:"80",color:t,ariaLabel:"grid-loading",wrapperStyle:{},wrapperClass:"",radius:"12.5"})}),Q=({totalQuestions:t,running:j,startTime:o,type:n,preTestId:a,postTestId:l,randomAns:x,mock:w})=>{const g=T(),i=c.useContext(E),{isLoading:s,error:r,sendRequest:d,clearError:b}=G(),[k,B]=F.useState(1),A=Math.ceil(t/10),[C,N]=c.useState({}),[D,S]=c.useState(!1),[M,$]=c.useState(!1),f=()=>{S(!1),$(!1)},P=()=>{Object.values(C).length!==t?S(!0):$(!0)};function O(){let h={},u=["A","B","C","D"];for(let p=1;p<=200;p++){let v=u[Math.floor(Math.random()*u.length)];h[p]=v}return h}const I=()=>{N(O())},H=async()=>{if(w)g("/result/1");else{const h=(new Date().getTime()-o)/1e3,u=i.userId,p=Object.values(C).join(","),v=window.location.hostname.split(".")[0],R={timeUsage:h,preTestId:a,postTestId:l,studentId:u,answer:p,type:n,subDomain:v};try{const m=await d("https://upskill-develop.herokuapp.com/api/result/submit","POST",JSON.stringify(R),{"Content-Type":"application/json"});console.log(m),g(`/result?type=${n}&testId=${l||a}&answer=${encodeURIComponent(p)}&score=${m.data.score}&time=${h}`)}catch(m){console.log(m),alert(m)}console.log(R)}};return e.jsxs(e.Fragment,{children:[s&&e.jsx("div",{className:"loading-position",children:e.jsx(W,{color:"#F37103"})}),!s&&e.jsxs("div",{className:"ans-card",children:[e.jsx("button",{onClick:I,style:{display:`${x?"":"none"}`},children:"Random Ans!"}),e.jsxs("div",{children:[e.jsx("h2",{children:"Answer Sheet"}),e.jsx("hr",{className:"separator"}),e.jsx(V,{running:j})]}),e.jsx("div",{children:e.jsx(J,{totalQuestions:t,totalPages:A,activePage:k,answers:C,setAnswers:N})}),e.jsx("div",{className:"ans-pagination",children:e.jsx(U,{totalPages:A,activePage:k,setActivePage:B})}),e.jsx("button",{className:"ans-btn-submit",onClick:P,children:e.jsx("h2",{children:"Submit Answer"})}),e.jsx(y,{show:D,onHide:f,centered:!0,dialogClassName:"modal-body",children:e.jsx(y.Body,{children:e.jsxs("div",{style:{padding:"24px",flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center",gap:"12px"},children:[e.jsx("h1",{children:"Warning"}),e.jsx("p",{className:"p-h2",children:"You have not completed the exam. Return to the exam."}),e.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"24px"},children:e.jsx("button",{style:{padding:"10px",backgroundColor:"#F37103",borderRadius:"8px"},onClick:f,children:"Back to test!!"})})]})})}),e.jsx(y,{show:M,onHide:f,centered:!0,dialogClassName:"modal-body",children:e.jsx(y.Body,{children:e.jsxs("div",{style:{padding:"24px",flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center",gap:"12px"},children:[e.jsx("h1",{children:"Notice"}),e.jsx("p",{className:"p-h2",children:"Are you sure you want to complete the exam?"}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"24px"},children:[e.jsx("button",{style:{padding:"10px",backgroundColor:"white",borderRadius:"8px",border:"1px solid black"},onClick:f,children:"I'd like to double-check."}),e.jsx("button",{style:{padding:"10px",backgroundColor:"#F37103",borderRadius:"8px"},onClick:H,children:"Complete!"})]})]})})})]})]})},X="/assets/menu_book-38efbf94.svg",Z="/assets/Default-c7fb934d.svg";export{Q as A,X as B,Z as T};
