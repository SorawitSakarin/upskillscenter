import{r as o,j as e,L as D,u as N,M as f,a as L}from"./index-55cceeff.js";import{T as b,F as T}from"./index.esm-209d4ef6.js";import{u as g}from"./http-hook-dc2aacf9.js";import{C as F,L as H}from"./AdminComponent-404b8557.js";import{B as i}from"./MainNavbar-eed8c9e6.js";import"./iconBase-4260ecf4.js";import"./hook-e9eee1cb.js";import"./react-lifecycles-compat.es-22c986ff.js";import"./Anchor-149a2421.js";const R=()=>{const t=new FormData,{isLoading:d,error:a,sendRequest:u,clearError:h}=g(),[c,r]=o.useState(!1),[n,x]=o.useState(),l=new FileReader,[j,S]=o.useState({head:"",body:""}),[m,y]=o.useState(!1),w=s=>{x(s.target.files[0])},C=s=>{s.preventDefault(),n&&(l.onload=function(k){var v;const p=(v=k.target)==null?void 0:v.result;S({...j,head:p.split(`
`)[0],body:p}),console.log(p.split(`
`)[1]),console.log(p.split(`
`)[2])},l.readAsText(n)),y(!m)},E=async()=>{try{console.log("confirmStudentHandler!!!"),t.append("file",n);const s=await fetch("https://upskill-develop.herokuapp.com/api/student/upload",{method:"POST",body:t});console.log(t.get("file")),console.log(t.get("file")),console.log(s),r(!0),console.log(s)}catch(s){alert(s),console.log("something went wrong")}};return e.jsx("div",{children:e.jsxs(F,{className:"p-5",children:[e.jsx("h4",{children:"Import student file CSV"}),e.jsxs("form",{children:[e.jsx("input",{type:"file",id:"csvFileInput",accept:".csv,.xlsx",onChange:w}),e.jsx(i,{variant:"warning",onClick:s=>{C(s)},children:"SHOW FILE CSV"})]}),m&&e.jsx("div",{style:{overflowX:"auto",overflowY:"auto",height:"30vh"},children:e.jsx(b,{head:j.head,body:j.body})}),d&&e.jsx(D,{}),c&&e.jsx(T,{size:24}),m&&e.jsxs(i,{variant:"outline-danger",style:{width:"200px"},onClick:E,children:[" ","ใช้ไฟล์นี้แหละ"]})]})})},M=({existingStudent:t})=>{N();const{isLoading:d,error:a,sendRequest:u,clearError:h}=g(),[c,r]=o.useState(!1),n=()=>{r(!0)},x=async()=>{try{const l=await u("https://upskill-develop.herokuapp.com/api/student/delete/"+t.id,"DELETE",{"Content-Type":"application/json"});console.log(l),window.location.reload()}catch(l){console.log(l)}};return e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("div",{style:{width:"20%"},children:e.jsx("h2",{children:t.schoolName})}),e.jsx("div",{style:{width:"70%"},children:e.jsxs("h2",{children:[t.firstName," ",t.lastName]})}),e.jsxs("div",{style:{gap:"8px"},children:[e.jsx(i,{variant:"danger",onClick:n,children:"DELETE"}),e.jsx(i,{onClick:()=>alert("Developing"),children:"Edit"})]})]}),e.jsx("div",{}),e.jsxs(f,{show:c,onHide:()=>r(!1),centered:!0,children:[e.jsxs(f.Body,{children:[e.jsx("h1",{children:"Notice"}),e.jsxs("p",{className:"p-h2",children:["ต้องการลบข้อมูล ",t.firstName," ",t.lastName," ใช่หรือไม่?"]})]}),e.jsxs(f.Footer,{children:[e.jsx(i,{variant:"danger",onClick:()=>r(!1),children:"cancel"}),e.jsx(i,{variant:"dark",onClick:x,children:"Yes, Delete!!"})]})]})]})},I=({existingStudents:t})=>(console.log(t),e.jsxs("div",{className:"admin-card-col",children:[e.jsx("h1",{children:"Student edit"}),e.jsx("hr",{}),t.map((d,a)=>e.jsx(M,{existingStudent:d},a))]})),X=()=>{const{isLoading:t,error:d,sendRequest:a,clearError:u}=g(),[h,c]=o.useState([]);return o.useEffect(()=>{(async()=>{try{const n=await a("https://upskill-develop.herokuapp.com/api/student");c(n.data),console.log(n)}catch{}})()},[a]),e.jsx("div",{children:e.jsxs(H,{children:[t&&e.jsx(L,{}),!t&&e.jsxs("div",{className:"flex flex-col p-20 gap-10 appear",style:{background:"#f4f4f4",minHeight:"100vh"},children:[e.jsx("div",{children:e.jsx("h1",{children:"Student Manager"})}),e.jsx(R,{}),h.length>0&&e.jsx(I,{existingStudents:h})]})]})})};export{X as default};
