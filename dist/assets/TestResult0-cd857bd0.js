import{j as e,r as a,A as N}from"./index-55cceeff.js";import{R as T}from"./ResultSheet-ed620783.js";/* empty css             */import{T as b}from"./TestDocumentImages-5e8244b6.js";import{u as S}from"./http-hook-dc2aacf9.js";import{B as k}from"./index.esm-9a14dc49.js";import"./AnswerSheet-c8cd74e3.js";import"./Anchor-149a2421.js";import"./iconBase-4260ecf4.js";const A=({exam:r,answers:n,results:o,score:c,timer:p})=>{const i=o.split(",");let d={};for(let t=1;t<=i.length;t++)d[t]=i[t-1];return e.jsx("div",{className:"test-body",children:e.jsxs("div",{className:"test-body-row",children:[e.jsxs("div",{className:"test-card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h1",{children:["Result ",r.title]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"end"},children:[e.jsxs("p",{className:"p-h4",children:[" ",Math.floor(r.time/60)," minutes"]}),e.jsxs("p",{className:"p-h4",children:[" ",r.tag.split(",").splice(0,3).join(",")," "]})]})]}),e.jsx("div",{className:"test-description",children:e.jsx("p",{className:"p-h2",dangerouslySetInnerHTML:{__html:r.description.replace(/\n/g,"<br />")}})}),e.jsx(b,{documentImages:r.questionFile})]}),e.jsx("div",{style:{minWidth:"242px"}}),e.jsx("div",{className:"sticky-wrapper",children:e.jsx(T,{answers:n,results:d,score:c,timer:p})})]})})};const C=({url:r})=>{const n=["วิชาอื่นนอกหลักสูตรเราก็มี ไม่ว่าจะ Finance หรือ Computer Programming ","ข้อสอบสามารถทำได้หลายครั้ง แต่คะแนนจะถูกบันทึกแค่ครั้งแรกเท่านั้น","สมัยนี้รู้วิชาในหลักสูตรไม่พอ ต้องรู้นอกหลักสูตรด้วยที่ Upskill Center มีให้เรียนเพียบ !","การทำข้อสอบในบทเรียนต่างๆ จะต้องทำครบทุกข้อเท่านั้นจึงจะสามารถประเมินผลสอบได้","ก่อนจะเข้าไปเรียนหรือทำข้อสอบเพื่อวัดระดับ จะต้องทำข้อสอบ Pre-Test ในเรื่องนั้นๆก่อน","คะแนนผลสอบจะถูกบันทึกแค่ครั้งแรกครั้งเดียวเท่านั้น"],[o,c]=a.useState(Math.floor(Math.random()*n.length)),[p,i]=a.useState(!1);return a.useEffect(()=>{const d=setInterval(()=>{i(!0),setTimeout(()=>{c(t=>(t+1)%n.length),i(!1)},500)},5e3);return()=>clearInterval(d)},[]),e.jsx("div",{className:"pencil-background ",children:e.jsxs("div",{className:"pencil-card",children:[e.jsx("div",{className:"loader"}),e.jsxs("div",{className:"pencil-row",children:[e.jsx("div",{className:"pencil-light",children:e.jsx(k,{size:24})}),e.jsx("div",{className:`${p?"slideOut":"slideIn"}`,children:e.jsx("p",{className:"p-h2",children:n[o]})})]}),e.jsx("a",{href:`${r}`,target:"_blank",style:{color:"#57A458"},children:e.jsx("p",{className:"p-h2",children:"(เพิ่มข้อเสนอแนะได้ที่ Inbox Facebook)"})})]})})},F=()=>{const r=a.useContext(N),[n,o]=a.useState(),{isLoading:c,error:p,sendRequest:i,clearError:d}=S(),t=new URLSearchParams(location.search),x=t.get("type"),g=t.get("testId"),[j,w]=a.useState(t.get("time")),[f,I]=a.useState(t.get("score"));let u=t.get("answer");const[y,v]=a.useState();return a.useEffect(()=>{var h;let m={};if(u){const l=(h=decodeURIComponent(u))==null?void 0:h.split(",");for(let s=1;s<=l.length;s++)m[s]=l[s-1]}v(m)},[u]),a.useEffect(()=>{const m=async()=>{try{const s=(await i(`https://upskill-develop.herokuapp.com/api/${x}/${g}`)).data;o(s)}catch{}},h=async()=>{const l=x==="pretest"?{studentId:r.userId,preTestId:g}:{studentId:r.userId,postTestId:g};try{const s=await i("https://upskill-develop.herokuapp.com/api/result/query","POST",JSON.stringify(l),{"Content-Type":"application/json"});s&&(console.log(s.data[0]),v(s.data[0].answer),I(s.data[0].score),w(s.data[0].timeUsage))}catch(s){console.log(s),alert(s)}};m(),u==null&&h()},[i]),e.jsxs(e.Fragment,{children:[(c||!f||!j||!y||!n)&&e.jsx("div",{style:{height:"100vh",width:"100vw",backgroundColor:"#dededeaa"},children:e.jsx(C,{url:"https://www.facebook.com/Upskillscenter"})}),!c&&n&&f&&j&&y&&e.jsx(A,{results:n.question.correctAnswer,exam:n[x],answers:y,score:f,timer:j})]})};export{F as default};
