import{j as s,r as u,A as k,a0 as $,M as A,u as O,a as E}from"./index-55cceeff.js";import{u as q}from"./http-hook-dc2aacf9.js";import{b as B,c as Y}from"./index.esm-376e65ce.js";import{a as P,b as w,C as D}from"./index.esm-231efaf1.js";import{A as U,X as z,L as I,Y as T,C as G,T as H,a as W}from"./AreaChart-5f3d3409.js";import{C as J}from"./CardHoverDB-68904f7c.js";import{L as K}from"./LoadingSpinnerPuff-b9c0cf14.js";/* empty css             */import"./iconBase-4260ecf4.js";import"./react-lifecycles-compat.es-22c986ff.js";const X=({studentScores:t})=>(t=t==null?void 0:t.sort((d,o)=>d.score>=o.score?-1:1).slice(0,10),s.jsx("div",{className:"db-rank-card",children:t.map((d,o)=>{const a=Math.floor(d.timeUsage/60);return s.jsxs("div",{className:"db-rank-card-row",style:o===9?{}:{borderBottom:"1.4px solid #DFE0DF"},children:[s.jsxs("div",{style:{paddingLeft:"24px",display:"flex",gap:"16px"},children:[s.jsx("h3",{children:o+1}),s.jsx("h3",{children:d.fullName})]}),s.jsxs("div",{className:"db-rank-card-row-right",children:[s.jsxs("h3",{children:[a," min."]}),s.jsx("div",{style:{width:"50px"},children:s.jsx(P,{value:d.score,strokeWidth:10,styles:w({pathColor:"#F37103",trailColor:"transparent"}),children:s.jsx("div",{style:{width:"75%"},children:s.jsx(D,{value:d.score,text:`${Math.ceil(d.score)}%`,styles:w({pathColor:"#57A458",trailColor:"transparent",textSize:"28px",textColor:"black"})})})})})]})]},o)})})),_=({tagScores:t,pretestActive:d})=>s.jsx("div",{className:"db-prog-list-bar",children:t.map((o,a)=>{const i=d?o.preTestScore:o.postTestScore;return s.jsxs("div",{className:"db-prog-list-bar-item",children:[s.jsx("div",{style:{display:"flex",width:"200px"},children:s.jsxs("p",{className:"p-h2",children:[" - ",o.tag]})}),s.jsxs("div",{style:{display:"flex",width:"100%",backgroundColor:"white",height:"10px",borderRadius:"8px"},children:[i&&s.jsx("div",{className:"slide-left",style:{display:"flex",width:`${i}%`,backgroundColor:"orange",height:"10px",borderRadius:"8px"}}),!i&&s.jsx("div",{className:"slide-left",style:{display:"flex",width:"100%",backgroundColor:"#dedede",height:"10px",borderRadius:"8px"}})]}),s.jsxs("div",{style:{display:"flex",width:"100px",justifyContent:"flex-end"},children:[i&&s.jsxs("p",{className:"p-h2",children:[i,"%"]}),!i&&s.jsx("p",{className:"p-h2",children:" -------"})]})]},a)})}),Q=({student:t,topic:d,setTopic:o})=>{const a=u.useContext(k),[i,p]=u.useState(!0);let r,n;if(a.token){r=$(a.token);const m=(r==null?void 0:r.studentName.charAt(0).toUpperCase())+(r==null?void 0:r.studentName.slice(1)),v=(r==null?void 0:r.studentLastname.charAt(0).toUpperCase())+(r==null?void 0:r.studentLastname.slice(1));n=m+" "+v}if(t==null)return s.jsxs("div",{className:"db-prog-list",children:[s.jsx("div",{className:"db-prog-head",children:s.jsxs("h1",{children:["Skill evaluation - ",n]})}),s.jsx("div",{children:s.jsxs("h1",{children:["You do not have a score record in this topic : ",d.title]})})]});const h=t.postTestScore,j=t.preTestScore,x=t.tagScores;return s.jsxs("div",{className:"db-prog-list",children:[s.jsx("div",{className:"db-prog-head",children:s.jsxs("h1",{children:["Skill evaluation - ",n]})}),h&&j&&x&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"pre-post",children:[s.jsx("div",{className:`pre-post-btn ${i?"pre-post-btn-active":""}`,onClick:()=>p(!0),children:s.jsx("h2",{children:"Pre test "})}),s.jsx("div",{className:`pre-post-btn ${i?"":"pre-post-btn-active"}`,onClick:()=>p(!1),children:s.jsx("h2",{children:"Post test "})})]}),s.jsxs("div",{className:"db-prog-topic",children:[s.jsx("div",{style:{display:"flex",width:"200px"},children:s.jsx("h1",{children:d.title})}),s.jsxs("div",{style:{display:"flex",width:"100%",backgroundColor:"white",height:"15px",borderRadius:"8px"},children:[j&&i&&s.jsx("div",{className:"slide-left",style:{display:"flex",width:`${j}%`,backgroundColor:"#FF891C",height:"15px",borderRadius:"8px"},children:" "}),!i&&h&&s.jsx("div",{className:"slide-left",style:{display:"flex",width:`${h}%`,backgroundColor:"#FF891C",height:"15px",borderRadius:"8px"},children:" "})]}),s.jsx("div",{style:{display:"flex",width:"100px",justifyContent:"flex-end"},children:s.jsxs("h2",{children:[i?j:h,"%"]})})]}),s.jsx("div",{children:s.jsx(_,{tagScores:x,pretestActive:i})})]}),(!h||!j||!x)&&s.jsx("div",{children:s.jsxs("h1",{children:["You do not have a score record in this topic : ",d.title]})})]})},V=({data:t,totalStudent:d})=>{var g;const o=u.useContext(k),a=t.map(e=>parseFloat(e.score)),i=o.userId,p=parseFloat((g=t.find(e=>e.studentId==i))==null?void 0:g.score),r=(t.filter(e=>e.score<=p).length/a.length*100).toFixed(0),n=(a.length/d*100).toFixed(0),h=Math.max(...a).toFixed(1),j=Math.min(...a).toFixed(1),x=(a.reduce((e,l)=>e+l)/a.length).toFixed(1),m=[...a].sort((e,l)=>e-l),v=Math.floor(m.length/2),C=m.length%2===0?(m[v-1]+m[v])/2:m[v],y={};for(let e of a)y[Math.floor(e)]?y[Math.floor(e)]+=1:y[Math.floor(e)]=1;const N=Object.entries(y).sort((e,l)=>l[1]-e[1]).slice(0,3).map(e=>Number(e[0])),S=(h-j).toFixed(1),b=a.map(e=>Math.pow(e-x,2)).reduce((e,l)=>e+l)/a.length,c=Math.sqrt(b).toFixed(1);return s.jsxs("div",{className:"dashboard-info-grid",children:[s.jsxs("div",{className:"dashboard-info-grid-content no-test shadow",children:[s.jsx("h2",{children:"Number of test"}),s.jsxs("div",{className:"no-test-row",children:[s.jsx("div",{className:"no-test-row-left",children:s.jsx(D,{value:n,strokeWidth:16,styles:w({pathColor:"#F37103",trailColor:"#57A458",strokeLinecap:"butt"})})}),s.jsxs("div",{className:"no-test-row-right",children:[s.jsx("div",{className:"dashboard-dot",style:{backgroundColor:"#F37103",borderRadius:"50%"}}),s.jsxs("h3",{children:[n,"%"]}),s.jsx("p",{className:"p-h5",children:"Submitted"}),s.jsx("br",{}),s.jsx("div",{className:"dashboard-dot",style:{backgroundColor:"#57A458",borderRadius:"50%"}}),s.jsxs("h3",{children:[100-n,"%"]}),s.jsx("p",{className:"p-h5",children:"No Submitted"})]})]})]}),s.jsxs("div",{className:"dashboard-info-grid-content avg-score shadow",children:[s.jsx("h2",{children:"Average score"}),s.jsxs("div",{className:"avg-score-row",children:[s.jsxs("div",{className:"avg-score-row-left",children:[s.jsx("div",{className:"avg-score-bar slide-up",style:{backgroundColor:"#F37103",height:`${p.toFixed(1)}%`}}),s.jsx("div",{className:"avg-score-bar slide-up",style:{backgroundColor:"#57A458",height:`${x}%`}}),s.jsx("div",{className:"avg-score-bar slide-up",style:{backgroundColor:"#4285F4",height:`${C.toFixed(1)}%`}})]}),s.jsxs("div",{className:"avg-score-row-right",children:[s.jsx("div",{className:"dashboard-dot",style:{backgroundColor:"#F37103"}}),s.jsxs("h3",{children:[p.toFixed(1),"%"]}),s.jsx("p",{className:"p-h5",children:"Your score"}),s.jsx("div",{className:"dashboard-dot",style:{backgroundColor:"#57A458"}}),s.jsxs("h3",{children:[x,"%"]}),s.jsx("p",{className:"p-h5",children:"Mean"}),s.jsx("div",{className:"dashboard-dot",style:{backgroundColor:"#4285F4"}}),s.jsxs("h3",{children:[C.toFixed(1),"%"]}),s.jsx("p",{className:"p-h5",children:"Median"})]})]})]}),s.jsxs("div",{className:"dashboard-info-grid-content sd-stat shadow",children:[s.jsx("h2",{children:"SD Stat"}),s.jsxs("div",{className:"sd-stat-row",children:[s.jsx("div",{className:"sd-stat-box shadow",children:s.jsx("h2",{children:c})}),s.jsx("p",{className:"p-h5",children:"Show spread of data points around the mean"})]})]}),s.jsxs("div",{className:"dashboard-info-grid-content mode-score shadow",children:[s.jsx("h2",{children:"Top 3 Most Scores"}),s.jsx("p",{className:"p-h5",children:"Representing the most common or recurring 3 values"}),s.jsx("div",{className:"mode-score-row",children:N.map((e,l)=>s.jsx("div",{className:"mode-score-box shadow",children:s.jsx("h2",{children:e})},l))})]}),s.jsxs("div",{className:"dashboard-info-grid-content range-score shadow",children:[s.jsx("h2",{children:"Range score"}),s.jsxs("div",{className:"range-score-grid",children:[s.jsx("div",{className:"range-score-content",style:{backgroundColor:"#57A458",color:"white"},children:s.jsxs("h3",{children:[j,"%"]})}),s.jsx("div",{className:"range-score-content slide-left",style:{backgroundColor:"#F37103",color:"white"},children:s.jsxs("h3",{children:[S,"%"]})}),s.jsx("div",{className:"range-score-content",style:{backgroundColor:"#4285F4",color:"white"},children:s.jsxs("h3",{children:[h,"%"]})}),s.jsx("div",{className:"range-score-content",children:s.jsx("h4",{children:"Min"})}),s.jsx("div",{className:"range-score-content",children:s.jsx("h4",{children:"Range"})}),s.jsx("div",{className:"range-score-content",children:s.jsx("h4",{children:"Max"})})]})]}),s.jsxs("div",{className:"dashboard-info-grid-content p-score shadow",children:[s.jsx("h2",{children:"Your percentile with a score of"}),s.jsx("div",{className:"p-score-box",children:s.jsxs("h2",{children:[p,"%"]})}),s.jsx("div",{className:"p-score-bar",children:s.jsx("div",{className:"p-score-progress slide-left",style:{width:`${r}%`},children:r>35&&s.jsxs("p",{className:"p-h3",children:["Beat ",r,"% of students "]})})}),r<=35&&s.jsxs("p",{className:"p-h3 ml-1",children:["Beat ",r,"% of students "]})]})]})},Z=({studentScores:t,totalStudent:d})=>{function o(n){const h=Array.from({length:100},(j,x)=>({score:x+1,studentCount:0}));for(const j of n){const x=Math.floor(parseFloat(j.score));h[x].studentCount++}return h}const a=o(t),[i,p]=u.useState(!1),r=()=>{p(!1)};return s.jsxs("div",{className:"db-graph shadow",children:[s.jsxs("div",{className:"db-graph-header",children:[s.jsx("h1",{children:"Statistics"}),s.jsx("div",{className:"info-btn",onClick:()=>p(!0),children:s.jsx("h5",{children:"?"})})]}),s.jsx("div",{style:{display:"flex",width:"100%",justifyContent:"center",textAlign:"center"},children:s.jsx("p",{className:"p-h3",children:"Provides a concise overview of the scores achieved by participants, offering a comprehensive snapshot of their performance."})}),s.jsx("div",{className:"shadow",style:{backgroundColor:"white",borderRadius:"16px",width:"100%"},children:s.jsxs(U,{width:450,height:250,data:a,margin:{top:20,right:0,left:-10,bottom:20},children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"colorstudentCount",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#FF891C",stopOpacity:1}),s.jsx("stop",{offset:"95%",stopColor:"#FF891C",stopOpacity:0})]})}),s.jsx(z,{dataKey:"score",tickSize:1,children:s.jsx(I,{value:"Score",offset:-5,position:"insideBottom"})}),s.jsx(T,{children:s.jsx(I,{value:"Count",angle:270,position:"left",offset:-25})}),s.jsx(G,{strokeDasharray:"5"}),s.jsx(H,{}),s.jsx(W,{type:"monotone",dataKey:"studentCount",stroke:"#FF891C",fillOpacity:1,fill:"url(#colorstudentCount)"})]})}),s.jsx(V,{data:t,totalStudent:d}),s.jsx(A,{show:i,onHide:r,centered:!0,dialogClassName:"modal-body",children:s.jsx(A.Body,{children:s.jsxs("div",{style:{padding:"24px",flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"flex-start",gap:"12px"},children:[s.jsx("h1",{children:"Definition"}),s.jsx("h3",{children:" English version:"}),s.jsxs("p",{className:"p-h3",children:["Total: The lenght of dataset",s.jsx("br",{}),"Max (Maximum): The highest value in a dataset.",s.jsx("br",{}),"Min (Minimum): The lowest value in a dataset.",s.jsx("br",{}),"Range: The difference between the highest and lowest values in a dataset.",s.jsx("br",{}),"Mean: The sum of all the values in a dataset divided by the number of values.",s.jsx("br",{}),"Median: The middle value in a dataset when the values are sorted in ascending or descending order. If there is an even number of values, the median is the average of the two middle values.",s.jsx("br",{}),"P25,75 (Percentiles 25 and 75): The value below which 25% or 75% of the data falls. It represents the 25th and 75th percentile of the dataset.",s.jsx("br",{}),"SD (Standard Deviation): A measure of the dispersion or spread of a dataset. A higher standard deviation indicates greater variability in the data.",s.jsx("br",{}),"Mode: The value that occurs most frequently in a dataset."]}),s.jsx("hr",{}),s.jsx("h3",{children:"เวอร์ชั่นภาษาไทย"}),s.jsxs("p",{className:"p-h3",children:["Total: จำนวนข้อมูลในชุดข้อมูล",s.jsx("br",{}),"Max (Maximum): ค่าที่มากที่สุดในชุดข้อมูล",s.jsx("br",{}),"Min (Minimum): ค่าที่น้อยที่สุดในชุดข้อมูล",s.jsx("br",{}),"Range: ผลต่างของค่าที่มากที่สุดและน้อยที่สุดของชุดข้อมูล",s.jsx("br",{}),"Mean (ค่าเฉลี่ย): ผมรวมของทุกค่าในชุดข้อมูลหารด้วยจำนวนในชุดข้อมูล",s.jsx("br",{}),"Median (มัธยฐาน): ค่าที่อยู่จุดกึ่งกลางของข้อมูลเมื่อนำค่าของข้อมูลมาเรียงตามลำดับ",s.jsx("br",{}),"P25,75 (ค่าเปอร์เซ็นต์ไทล์ที่ 25, 75): ค่าของข้อมูลที่อยู่เปอร์เซ็นที่ 25 หรือ 75 ของชุดข้อมูลเมื่อถูกนำมาเรียงตามลำดับ",s.jsx("br",{}),"SD (ค่าเบี่ยงเบนมาตรฐาน): ค่าที่ใช้วัดความกระจายหรือการกระจายตัวของชุดข้อมูล",s.jsx("br",{}),"Mode: ค่าที่ถูกพบบ่อยที่สุดในชุดข้อมูล"]}),s.jsx("hr",{}),s.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"24px"},children:s.jsx("button",{style:{padding:"10px",borderRadius:"8px",border:"1.4px solid black"},onClick:r,children:"Thank you, I got it!"})})]})})})]})},ss=({studentScores:t})=>{const d=u.useContext(k);t=t==null?void 0:t.sort((n,h)=>n.score>=h.score?-1:1);const o=d.userId,a=t.findIndex(n=>n.studentId==o);if(a===-1)return s.jsx("div",{children:s.jsx("h1",{children:"No score"})});const i=t[a].fullName,p=Math.floor(t[a].timeUsage/60),r=t[a].score;return s.jsxs("div",{className:"db-rank-your-score",children:[s.jsx("div",{className:"db-rank-dot",children:s.jsx("h2",{children:".................."})}),s.jsx("div",{className:"db-rank-card",style:{border:"7px solid  #F37103"},children:s.jsxs("div",{className:"db-rank-card-row",children:[s.jsxs("div",{style:{paddingLeft:"24px",display:"flex",gap:"16px"},children:[s.jsx("h3",{children:a+1}),s.jsx("h3",{children:i})]}),s.jsxs("div",{className:"db-rank-card-row-right",children:[s.jsx(B,{size:24}),s.jsxs("h3",{children:[p," min."]}),s.jsx("div",{style:{width:"50px"},children:s.jsx(P,{value:r,strokeWidth:10,styles:w({pathColor:"#F37103",trailColor:"transparent"}),children:s.jsx("div",{style:{width:"75%"},children:s.jsx(D,{value:r,text:`${Math.ceil(r)}%`,styles:w({pathColor:"#57A458",trailColor:"transparent",textSize:"28px",textColor:"black"})})})})})]})]},a)})]})},es=({student:t,posttests:d,existingResults:o,totalStudents:a,topic:i,setTopic:p,loadingResult:r,currentScore:n})=>{O(),u.useContext(k);const[h,j]=u.useState(!1),x=m=>{p(m),j(!1)};return s.jsxs("div",{className:"db-background",children:[s.jsxs("div",{className:"db-background-row",children:[s.jsxs("div",{className:"db-lb-background shadow",children:[s.jsx("div",{className:"db-graph-header",children:s.jsx("h1",{children:" Leader board"})}),s.jsxs("div",{className:"db-lb-dropdown",children:[s.jsxs("div",{children:[s.jsx("h2",{children:" Top 10 Ranking"}),s.jsx("p",{className:"p-h5",children:"Ranking by the subject selected from right corner"})]}),s.jsxs("div",{style:{display:"flex"},children:[r&&s.jsx(K,{color:"#F37103"}),s.jsxs("div",{className:"db-lb-dropdown-topic",children:[s.jsx("h2",{children:i.title}),s.jsx("div",{className:"dropdown-btn",onClick:()=>j(!h),children:s.jsx(Y,{size:16,color:"white"})}),h&&s.jsx("div",{className:"dropdown-items-dashboard",children:d.map((m,v)=>s.jsx("div",{onClick:()=>x(m),children:s.jsx("h3",{children:m.title})},v))})]})]})]}),i&&o&&n&&s.jsx(X,{studentScores:o}),o&&n&&s.jsx(ss,{studentScores:o}),!n&&s.jsx(J,{})]}),o&&n&&s.jsx(Z,{studentScores:o,totalStudent:100})]}),s.jsx("div",{className:"db-prog-background",children:s.jsx(Q,{student:t,topic:i,setTopic:p})})]})},ps=()=>{const d=u.useContext(k).userId,{isLoading:o,error:a,sendRequest:i,clearError:p}=q(),[r,n]=u.useState(!1),[h,j]=u.useState(),[x,m]=u.useState(),[v,C]=u.useState(null),[y,M]=u.useState(),[N,S]=u.useState();u.useEffect(()=>{(async()=>{try{const c=await i("https://upskill-develop.herokuapp.com/api/posttest");if(c){const g=window.location.hostname.split(".")[0],e=c.data.filter(l=>l.subDomain==="all"||l.subDomain.split(",").includes(g)).sort((l,f)=>l.title<=f.title?-1:1);m(e),S(e[0])}}catch(c){console.log(c)}})()},[i]),u.useEffect(()=>{(async()=>{n(!0);try{const c=window.location.hostname.split(".")[0],g=await fetch("https://upskill-develop.herokuapp.com/api/result/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subDomain:c,postTestId:N==null?void 0:N.id})});if(g){const e=await g.json();j(e.data);const l=e.data.findIndex(f=>f.studentId==d);if(l!==-1){const f=e.data[l];M(f);const F=await fetch("https://upskill-develop.herokuapp.com/api/result/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:d,preTestId:f.preTestId,postTestId:null})});if(F){const L=(await F.json()).data[0];C(R(L,f))}}else M(null),C(null)}}catch(c){console.log(c),alert(c)}finally{n(!1)}})()},[N]);const R=(b,c)=>{let g={};g.preTestScore=b==null?void 0:b.score,g.postTestScore=c==null?void 0:c.score;const e=b==null?void 0:b.tag.split(",").map((l,f)=>({tag:l,preTestScore:b==null?void 0:b.tagScore.split(",")[f]}));if(e){const l=c==null?void 0:c.tag.split(",");for(let f=0;f<l.length;f++)e.find(F=>F.tag===l[f]).postTestScore=c==null?void 0:c.tagScore.split(",")[f]}return g.tagScores=e,g};return s.jsxs("div",{className:"exam-body ",children:[(o||!x||!N)&&s.jsx(E,{}),!o&&x&&N&&s.jsx(es,{student:v,posttests:x,existingResults:h,totalStudents:ts,topic:N,setTopic:S,loadingResult:r,currentScore:y})]})},ts={TOEIC:35,TOELF:100,TCAS:50};export{ps as default};
