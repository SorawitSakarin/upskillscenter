import{u as f,P as y,r as i,j as e,M as j,A as v}from"./index-55cceeff.js";import{u as w}from"./http-hook-dc2aacf9.js";import{L as T}from"./LoadingSpinnerPencil-94ce2a7f.js";import{u as b}from"./useLeavePageWarning-fc16e788.js";import{A as k,B as I,T as S}from"./Default-06980837.js";import{Y as C}from"./YouTube.esm-ce1361be.js";/* empty css             */import{T as N}from"./TestDocumentImages-5e8244b6.js";import"./index.esm-9a14dc49.js";import"./iconBase-4260ecf4.js";import"./AnswerSheet-c8cd74e3.js";import"./Anchor-149a2421.js";const P=({exam:t})=>{var n,r;const p=f(),{testId:l}=y();b(!0);const[x,a]=i.useState(0),[m,c]=i.useState(!1),[h,o]=i.useState(!0),u=()=>{o(!1),p("/home")},g=()=>{o(!1),c(!0),a(new Date().getTime())},d={height:"500",width:"100%",playerVars:{autoplay:0}},s=t==null?void 0:t.videoUrl.split("v=")[1];return e.jsxs("div",{className:"test-body",children:[e.jsxs("div",{className:"test-body-row",children:[e.jsxs("div",{className:"test-card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h1",{children:["Pre Test ",t.title]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"end"},children:[e.jsxs("p",{className:"p-h4",children:["  ",Math.floor(t.time/60)," minutes"]}),e.jsxs("p",{className:"p-h4",children:[" ",(n=t.tag)==null?void 0:n.split(",").splice(0,3).join(",")," "]})]})]}),e.jsx("div",{className:"test-description",children:e.jsx("p",{className:"p-h2",dangerouslySetInnerHTML:{__html:t.description.replace(/\n/g,"<br />")}})}),s&&e.jsx(C,{videoId:s,opts:d}),e.jsx(N,{documentImages:t.questionFile})]}),e.jsx("div",{style:{minWidth:"242px"}}),e.jsx("div",{className:"sticky-wrapper",children:e.jsx(k,{totalQuestions:t.totalQuestions,running:m,startTime:x,type:"pretest",postTestId:null,preTestId:l,randomAns:!0,mock:!1})})]}),e.jsx(j,{show:h,centered:!0,dialogClassName:"modal-body",children:e.jsx(j.Body,{children:e.jsxs("div",{style:{padding:"24px",flexDirection:"column",display:"flex",justifyContent:"center",alignItems:"center",gap:"12px"},children:[e.jsxs("h1",{children:["Welcome to ",t.title]}),e.jsx("p",{className:"p-h2",dangerouslySetInnerHTML:{__html:t.description.replace(/\n/g,"<br />")}}),e.jsx("p",{className:"p-h2",children:"การสอบ Pre-Test สามารถสอบได้แค่ครั้งเดียวเท่านั้น โดยจะมีการบันทึกคะแนนเพื่อเทียบกับคะแนนหลังเรียน ต้องการจะเริ่มทำข้อสอบเลยหรือไม่"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",width:"100%",gap:"8px",justifyContent:"flex-start"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"nowrap",width:"300px"},children:[e.jsx("img",{src:I,alt:"BookLogo",width:24}),e.jsx("h2",{children:(r=t.tag)==null?void 0:r.split(",").splice(0,3).join(",")})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("img",{src:S,alt:"BookLogo",width:24}),e.jsxs("h2",{children:["Time ",Math.floor(t.time/60)," minutes"]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"24px",marginTop:"16px"},children:[e.jsx("button",{style:{padding:"10px",borderRadius:"8px",border:"1.4px solid black"},onClick:u,children:e.jsx("h3",{children:"Go back"})}),e.jsx("button",{style:{padding:"10px",backgroundColor:"#F37103",borderRadius:"8px",color:"white"},onClick:g,children:e.jsx("h3",{children:"Start!"})})]})]})})})]})},U=()=>{const t=f(),{testId:p}=y();i.useContext(v);const{isLoading:l,error:x,sendRequest:a,clearError:m}=w(),[c,h]=i.useState(),[o,u]=i.useState(!1);return i.useEffect(()=>{(async()=>{var d;try{const s=await a(`https://upskill-develop.herokuapp.com/api/pretest/${p}`),n=s==null?void 0:s.data.pretest,r=(d=s==null?void 0:s.data.question.correctAnswer)==null?void 0:d.split(",").length;console.log(s==null?void 0:s.data),console.log({...n,totalQuestions:r}),h({...n,totalQuestions:r})}catch{t("/home")}})(),setTimeout(()=>{u(!0)},7e3)},[a]),e.jsxs("div",{children:[(l||!o)&&e.jsx("div",{style:{height:"100vh",width:"100vw",backgroundColor:"#dededeaa"},children:e.jsx(T,{url:"https://www.facebook.com/Upskillscenter"})}),!l&&c&&o&&e.jsx(P,{exam:c})]})};export{U as default};
