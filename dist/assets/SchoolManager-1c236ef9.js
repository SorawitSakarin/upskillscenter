import{u as D,j as e,M as d,L as B,r as i,A as M,a as R}from"./index-55cceeff.js";import{L as q,C as L}from"./AdminComponent-404b8557.js";import{u as k}from"./http-hook-dc2aacf9.js";import{B as c}from"./MainNavbar-eed8c9e6.js";import{F as s,C as g}from"./Form-e975255d.js";import{R as b}from"./Row-bd8b4b80.js";import"./hook-e9eee1cb.js";import"./react-lifecycles-compat.es-22c986ff.js";import"./Anchor-149a2421.js";import"./ElementChildren-9bc860c0.js";const F=({formState:o,showModal:h,setShowModal:a})=>{D();const{isLoading:p,error:x,sendRequest:u,clearError:n}=k(),t=async()=>{try{const r=await u("https://upskill-develop.herokuapp.com/api/school/create","POST",JSON.stringify(o),{"Content-Type":"application/json"});console.log(r),window.location.reload()}catch(r){console.log(r)}};return e.jsxs(d,{show:h,onHide:()=>a(!1),children:[e.jsxs(d.Body,{children:[e.jsx("h2",{children:"schoolName"}),e.jsx("p",{className:"p-h2",children:o.schoolName}),e.jsx("h2",{children:"subDomain"}),e.jsx("p",{className:"p-h2",children:o.subDomain}),e.jsx("h2",{children:"backgroundHome"}),e.jsx("img",{src:o.backgroundHome,alt:"backgroundHome"}),e.jsx("h2",{children:"backgroundLogin"}),e.jsx("img",{src:o.backgroundLogin,alt:"backgroundLogin"})]}),e.jsxs(d.Footer,{children:[p&&e.jsx(B,{}),e.jsx(c,{onClick:()=>a(!1),variant:"danger",children:"cancel"}),e.jsx(c,{variant:"primary",onClick:t,children:"Submit"})]})]})},I=({existingSchool:o})=>{D();const{isLoading:h,error:a,sendRequest:p,clearError:x}=k(),[u,n]=i.useState(!1),t=()=>{n(!0)},r=async()=>{try{const m=await p("https://upskill-develop.herokuapp.com/api/school/delete/"+o.id,"DELETE",{"Content-Type":"application/json"});console.log(m),window.location.reload()}catch(m){console.log(m)}};return e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("h2",{children:[o.schoolName," "]}),e.jsxs("div",{style:{gap:"8px"},children:[e.jsx(c,{variant:"danger",onClick:t,children:"DELETE"}),e.jsx(c,{onClick:()=>alert("Developing"),children:"Edit"})]})]}),e.jsx("div",{}),e.jsxs(d,{show:u,onHide:()=>n(!1),centered:!0,children:[e.jsxs(d.Body,{children:[e.jsx("h1",{children:"Notice"}),e.jsxs("p",{className:"p-h2",children:["ต้องการลบข้อมูล ",o.schoolName," ใช่หรือไม่?"]})]}),e.jsxs(d.Footer,{children:[e.jsx(c,{variant:"danger",onClick:()=>n(!1),children:"cancel"}),e.jsx(c,{variant:"dark",onClick:r,children:"Yes, Delete!!"})]})]})]})},T=({existingSchools:o})=>(console.log(o),e.jsxs("div",{className:"admin-card-col",children:[e.jsx("h1",{children:"School edit"}),e.jsx("hr",{}),o.map((h,a)=>e.jsx(I,{existingSchool:h},a))]})),K=()=>{i.useContext(M);const{isLoading:o,error:h,sendRequest:a,clearError:p}=k(),[x,u]=i.useState([]);i.useEffect(()=>{(async()=>{try{const l=await a("https://upskill-develop.herokuapp.com/api/school");u(l.data),console.log(l)}catch{}})()},[a]);const[n,t]=i.useState({schoolName:"",subDomain:"",backgroundHome:"",backgroundLogin:""}),r=j=>{const{name:l,value:S,files:y}=j.target;if(l==="backgroundHome"||l==="backgroundLogin"){if(y){const E=y[0],v=new FileReader;v.onload=H=>{var C;const w=(C=H.target)==null?void 0:C.result;t({...n,[l]:w})},v.readAsDataURL(E)}}else t({...n,[l]:S})},m=async j=>{j.preventDefault(),console.log(n),f(!0)},[N,f]=i.useState(!1);return e.jsxs("div",{children:[e.jsxs(q,{children:[o&&e.jsx(R,{}),!o&&e.jsxs("div",{className:"flex flex-col p-20 gap-10",style:{background:"#f4f4f4",minHeight:"100vh"},children:[e.jsx("div",{children:e.jsx("h1",{children:"School Manager"})}),e.jsx(L,{children:e.jsx(L.Body,{children:e.jsxs(s,{onSubmit:m,children:[e.jsx(b,{children:e.jsx(g,{children:e.jsxs(s.Group,{controlId:"schoolschoolName",children:[e.jsxs(s.Label,{children:[e.jsx("span",{style:{color:"red"},children:"*"}),"  ชื่อโรงเรียน"]}),e.jsx(s.Control,{type:"text",name:"schoolName",value:n.schoolName,onChange:r,placeholder:"Upskill",required:!0})]})})}),e.jsx(b,{className:"mt-3",children:e.jsx(g,{children:e.jsxs(s.Group,{controlId:"SubDomain",children:[e.jsxs(s.Label,{children:[e.jsx("span",{style:{color:"red"},children:"*"}),"  ชื่อ SubDomain (เช่น https://rstd.upskillscenter.com ให้ใส่ว่า rstd)"]}),e.jsx(s.Control,{type:"text",name:"subDomain",value:n.subDomain,onChange:r,placeholder:"subDomain",required:!0})]})})}),e.jsx(b,{className:"mt-3",children:e.jsx(g,{children:e.jsxs(s.Group,{controlId:"backgroundLogin",children:[e.jsxs(s.Label,{children:[e.jsx("span",{style:{color:"red"},children:"*"}),"  Background Login"]}),e.jsx(s.Control,{name:"backgroundLogin",accept:"image/*",onChange:r,type:"file",required:!0})]})})}),e.jsx(b,{className:"mt-3",children:e.jsx(g,{children:e.jsxs(s.Group,{controlId:"backgroundHome",children:[e.jsx(s.Label,{children:"Background Home"}),e.jsx(s.Control,{name:"backgroundHome",accept:"image/*",onChange:r,type:"file"})]})})}),e.jsx(c,{variant:"primary",type:"submit",className:"mt-3",children:"Submit"})]})})}),x.length>0&&e.jsx(T,{existingSchools:x})]})]}),e.jsx(F,{formState:n,showModal:N,setShowModal:f})]})};export{K as default};
