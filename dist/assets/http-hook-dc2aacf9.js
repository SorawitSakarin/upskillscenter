import{r as t}from"./index-55cceeff.js";const b=()=>{const[u,s]=t.useState(!1),[l,a]=t.useState(null),r=t.useRef([]),i=t.useCallback(async(n,p="GET",h=null,g={})=>{s(!0);const o=new AbortController;r.current.push(o);try{const e=await fetch(n,{method:p,body:h,headers:g,signal:o.signal}),c=await e.json();if(r.current=r.current.filter(E=>E!==o),!e.ok)throw new Error(c.message);return s(!1),c}catch(e){if(e.message!=="The user aborted a request.")throw a(e.message),s(!1),e}},[]),f=()=>{a(null)};return t.useEffect(()=>()=>{r.current.forEach(n=>n.abort())},[]),{isLoading:u,error:l,sendRequest:i,clearError:f}};export{b as u};
